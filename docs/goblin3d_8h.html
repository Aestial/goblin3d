<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Goblin3D: src/goblin3d.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Goblin3D
   </div>
   <div id="projectbrief">Graphics engine for rendering 3D wireframe on monochromatic displays and TFT LCDs without any dependency required for Arduino platform.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('goblin3d_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">goblin3d.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Header file for 3D object rendering using the Goblin3D library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div>
<p><a href="goblin3d_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgoblin3d__obj__t.html">goblin3d_obj_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure representing a 3D object for rendering using the Goblin3D library.  <a href="structgoblin3d__obj__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ab72c35f4cc3aea8b4296e01774227c3e"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="goblin3d_8h.html#ab72c35f4cc3aea8b4296e01774227c3e">goblin3d_obj_draw_fn</a>) (uint16_t x1, uint16_t y1, uint16_t x2, uint16_t y2)</td></tr>
<tr class="memdesc:ab72c35f4cc3aea8b4296e01774227c3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type definition for a callback function used to draw lines between points.  <br /></td></tr>
<tr class="separator:ab72c35f4cc3aea8b4296e01774227c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae24db99a854272ed44f23fa50bbc5fda"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="goblin3d_8h.html#ae24db99a854272ed44f23fa50bbc5fda">goblin3d_init</a> (<a class="el" href="structgoblin3d__obj__t.html">goblin3d_obj_t</a> *obj, uint32_t point_count, uint32_t edge_count)</td></tr>
<tr class="memdesc:ae24db99a854272ed44f23fa50bbc5fda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a 3D object structure.  <br /></td></tr>
<tr class="separator:ae24db99a854272ed44f23fa50bbc5fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01f95040820b0cec183741784c151a3d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="goblin3d_8h.html#a01f95040820b0cec183741784c151a3d">goblin3d_free</a> (<a class="el" href="structgoblin3d__obj__t.html">goblin3d_obj_t</a> *obj)</td></tr>
<tr class="memdesc:a01f95040820b0cec183741784c151a3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the memory associated with a 3D object structure.  <br /></td></tr>
<tr class="separator:a01f95040820b0cec183741784c151a3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c722e0a5bff6a8b059c2d2ea64ba2ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="goblin3d_8h.html#a6c722e0a5bff6a8b059c2d2ea64ba2ab">goblin3d_precalculate</a> (<a class="el" href="structgoblin3d__obj__t.html">goblin3d_obj_t</a> *obj)</td></tr>
<tr class="memdesc:a6c722e0a5bff6a8b059c2d2ea64ba2ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Precalculates the rotated and projected points for a 3D object.  <br /></td></tr>
<tr class="separator:a6c722e0a5bff6a8b059c2d2ea64ba2ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adef913d7db7d1970e0595d05c10419a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="goblin3d_8h.html#adef913d7db7d1970e0595d05c10419a4">goblin3d_render</a> (<a class="el" href="structgoblin3d__obj__t.html">goblin3d_obj_t</a> *obj, <a class="el" href="goblin3d_8h.html#ab72c35f4cc3aea8b4296e01774227c3e">goblin3d_obj_draw_fn</a> draw)</td></tr>
<tr class="memdesc:adef913d7db7d1970e0595d05c10419a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renders the 3D object by drawing its edges on a 2D plane.  <br /></td></tr>
<tr class="separator:adef913d7db7d1970e0595d05c10419a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for 3D object rendering using the Goblin3D library. </p>
<dl class="section author"><dt>Author</dt><dd><a href="https://github.com/nthnn">Nathanne Isip</a> </dd></dl>
<p>This file contains the function declarations and data structures necessary for initializing, manipulating, and rendering 3D objects in a 2D space using the Goblin3D library. The library supports basic 3D transformations, including translation, rotation, and scaling. It is designed to work with microcontrollers and low-level graphical libraries.</p>
<p>The Goblin3D library provides functionalities to:</p><ul>
<li>Initialize and free 3D objects.</li>
<li>Pre-calculate the 3D coordinates based on rotation angles.</li>
<li>Render the 3D objects onto a 2D surface.</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
Usage Example</h2>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structgoblin3d__obj__t.html">goblin3d_obj_t</a> cube;</div>
<div class="line">goblin3d_init(&amp;cube, 8, 12);</div>
<div class="line"><span class="comment">// Set up cube vertices and edges...</span></div>
<div class="line"> </div>
<div class="line">goblin3d_precalculate(&amp;cube);</div>
<div class="line">goblin3d_render(&amp;cube, draw_function);</div>
<div class="line">goblin3d_free(&amp;cube);</div>
<div class="ttc" id="astructgoblin3d__obj__t_html"><div class="ttname"><a href="structgoblin3d__obj__t.html">goblin3d_obj_t</a></div><div class="ttdoc">Structure representing a 3D object for rendering using the Goblin3D library.</div><div class="ttdef"><b>Definition</b> goblin3d.h:72</div></div>
</div><!-- fragment --><p>The library supports simple perspective projection by translating the 3D coordinates into 2D screen space. It is lightweight and suitable for embedded systems with limited resources.</p>
<p>The library assumes that the Z-axis is pointing out of the screen, with positive values moving towards the viewer. The perspective transformation is performed by dividing the X and Y coordinates by the Z-coordinate.</p>
<dl class="section note"><dt>Note</dt><dd>The library does not handle memory management for the content of the arrays used for points and edges. The user is responsible for providing valid data and ensuring that resources are correctly freed using <code>goblin3d_free</code>. </dd></dl>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="ab72c35f4cc3aea8b4296e01774227c3e" name="ab72c35f4cc3aea8b4296e01774227c3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab72c35f4cc3aea8b4296e01774227c3e">&#9670;&#160;</a></span>goblin3d_obj_draw_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* goblin3d_obj_draw_fn) (uint16_t x1, uint16_t y1, uint16_t x2, uint16_t y2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type definition for a callback function used to draw lines between points. </p>
<p>This function type is used in the <code>goblin3d_render</code> function to draw lines between the projected 2D points of the 3D object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x1</td><td>The X-coordinate of the starting point of the line. </td></tr>
    <tr><td class="paramname">y1</td><td>The Y-coordinate of the starting point of the line. </td></tr>
    <tr><td class="paramname">x2</td><td>The X-coordinate of the ending point of the line. </td></tr>
    <tr><td class="paramname">y2</td><td>The Y-coordinate of the ending point of the line. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a01f95040820b0cec183741784c151a3d" name="a01f95040820b0cec183741784c151a3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01f95040820b0cec183741784c151a3d">&#9670;&#160;</a></span>goblin3d_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void goblin3d_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgoblin3d__obj__t.html">goblin3d_obj_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the memory associated with a 3D object structure. </p>
<p>This function deallocates the memory used for storing the points, edges, and other data in the <code><a class="el" href="structgoblin3d__obj__t.html" title="Structure representing a 3D object for rendering using the Goblin3D library.">goblin3d_obj_t</a></code> structure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>Pointer to the <code><a class="el" href="structgoblin3d__obj__t.html" title="Structure representing a 3D object for rendering using the Goblin3D library.">goblin3d_obj_t</a></code> structure to free. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae24db99a854272ed44f23fa50bbc5fda" name="ae24db99a854272ed44f23fa50bbc5fda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae24db99a854272ed44f23fa50bbc5fda">&#9670;&#160;</a></span>goblin3d_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool goblin3d_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgoblin3d__obj__t.html">goblin3d_obj_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>point_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>edge_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a 3D object structure. </p>
<p>This function allocates memory for the points and edges of the 3D object and sets up initial values for the rotation angles and offsets. If any memory allocation fails, the function will free any previously allocated memory and return <code>false</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>Pointer to the <code><a class="el" href="structgoblin3d__obj__t.html" title="Structure representing a 3D object for rendering using the Goblin3D library.">goblin3d_obj_t</a></code> structure to initialize. </td></tr>
    <tr><td class="paramname">point_count</td><td>The number of points (vertices) in the 3D object. </td></tr>
    <tr><td class="paramname">edge_count</td><td>The number of edges connecting the points in the 3D object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if initialization is successful, <code>false</code> otherwise. </dd></dl>

</div>
</div>
<a id="a6c722e0a5bff6a8b059c2d2ea64ba2ab" name="a6c722e0a5bff6a8b059c2d2ea64ba2ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c722e0a5bff6a8b059c2d2ea64ba2ab">&#9670;&#160;</a></span>goblin3d_precalculate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void goblin3d_precalculate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgoblin3d__obj__t.html">goblin3d_obj_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Precalculates the rotated and projected points for a 3D object. </p>
<p>This function applies rotation transformations to the original 3D points and projects them onto a 2D plane. The rotation is applied in the order: X-axis, Y-axis, and Z-axis. The projected points are then scaled and offset based on the object's parameters.</p>
<h3><a class="anchor" id="autotoc_md10"></a>
Mathematical Representation</h3>
<p>The rotation matrices for the X, Y, and Z axes are as follows:</p>
<ul>
<li><b>Rotation around the X-axis:</b>  <p class="formulaDsp">
\[
R_x(\theta) = \begin{pmatrix}
1 &amp; 0 &amp; 0 \\
0 &amp; \cos\theta &amp; -\sin\theta \\
0 &amp; \sin\theta &amp; \cos\theta
\end{pmatrix}
\]
</p>
</li>
<li><b>Rotation around the Y-axis:</b>  <p class="formulaDsp">
\[
R_y(\theta) = \begin{pmatrix}
\cos\theta &amp; 0 &amp; \sin\theta \\
0 &amp; 1 &amp; 0 \\
-\sin\theta &amp; 0 &amp; \cos\theta
\end{pmatrix}
\]
</p>
</li>
<li><b>Rotation around the Z-axis:</b>  <p class="formulaDsp">
\[
R_z(\theta) = \begin{pmatrix}
\cos\theta &amp; -\sin\theta &amp; 0 \\
\sin\theta &amp; \cos\theta &amp; 0 \\
0 &amp; 0 &amp; 1
\end{pmatrix}
\]
</p>
</li>
</ul>
<p>Given a point \((x, y, z)\), the rotated point is calculated as:</p>
<p class="formulaDsp">
\[
\begin{pmatrix}
x&#39; \\
y&#39; \\
z&#39;
\end{pmatrix}
= R_z(\theta_z) \times R_y(\theta_y) \times R_x(\theta_x) \times \begin{pmatrix}
x \\
y \\
z
\end{pmatrix}
\]
</p>
<p>After applying the rotations, the 3D point is projected onto a 2D plane using the formula:</p>
<p class="formulaDsp">
\[
x_{\text{proj}} = \frac{x&#39;}{z&#39;} \times scale_\text{size} + x_\text{offset}
\]
</p>
<p class="formulaDsp">
\[
y_{\text{proj}} = \frac{y&#39;}{z&#39;} \times scale_\text{size} + y_\text{offset}
\]
</p>
<p>The z-coordinate is clamped to a minimum value to avoid division by zero or very small values, which could cause large distortions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>Pointer to the <code><a class="el" href="structgoblin3d__obj__t.html" title="Structure representing a 3D object for rendering using the Goblin3D library.">goblin3d_obj_t</a></code> structure containing the 3D object data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adef913d7db7d1970e0595d05c10419a4" name="adef913d7db7d1970e0595d05c10419a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adef913d7db7d1970e0595d05c10419a4">&#9670;&#160;</a></span>goblin3d_render()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void goblin3d_render </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgoblin3d__obj__t.html">goblin3d_obj_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="goblin3d_8h.html#ab72c35f4cc3aea8b4296e01774227c3e">goblin3d_obj_draw_fn</a>&#160;</td>
          <td class="paramname"><em>draw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renders the 3D object by drawing its edges on a 2D plane. </p>
<p>This function uses the pre-calculated 2D points to draw lines representing the edges of the 3D object. A callback function is used to perform the actual drawing, allowing for flexibility in the rendering method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>Pointer to the <code><a class="el" href="structgoblin3d__obj__t.html" title="Structure representing a 3D object for rendering using the Goblin3D library.">goblin3d_obj_t</a></code> structure containing the 3D object data. </td></tr>
    <tr><td class="paramname">draw</td><td>A callback function used to draw lines between the points on the 2D plane. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Copyright 2024 - <a href="https://github.com/nthnn" target="_blank">Nathanne Isip</a></li>
    </ul>
</div>